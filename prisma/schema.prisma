generator client {
  provider        = "prisma-client"
  output          = "../src/generated/prisma"
  moduleFormat    = "cjs"
}

datasource db {
  provider = "postgresql"
}

model Region {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  cities    City[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("regions")
}

model City {
  id        Int      @id @default(autoincrement())
  name      String
  regionId  Int
  region    Region   @relation(fields: [regionId], references: [id], onDelete: Restrict)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([name, regionId]) // чтобы не было дублей городов внутри одной области
  @@index([regionId])
  @@map("cities")
}
